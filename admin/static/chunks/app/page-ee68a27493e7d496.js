(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{443:(e,t,s)=>{Promise.resolve().then(s.bind(s,2369))},2369:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Q});var a=s(5155),r=s(2115),l=s(6132),i=s(1169),n=s(6617),o=s(906),c=s(1761),d=s(1733),m=s(6991),u=s(5682),x=s(8425),h=s(7734),g=s(4595),p=s(6411),y=s(7555),v=s(5704);function b(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)("users"),i=async()=>{try{let e=await fetch("".concat(v.env.NEXT_PUBLIC_API_URL,"/api/admin/stats"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("adminToken")),"Content-Type":"application/json"}});if(e.ok){let s=await e.json(),a=new Date().getHours(),r=Array.from({length:24},(e,t)=>{var r,l,i,n,o,c;return{time:"".concat(t,":00"),users:t===a?(null==(r=s.users)?void 0:r.active)||0:Math.max(0,((null==(l=s.users)?void 0:l.active)||0)-Math.floor(20*Math.random())),listings:t===a?(null==(i=s.listings)?void 0:i.today)||0:Math.max(0,((null==(n=s.listings)?void 0:n.today)||0)-Math.floor(5*Math.random())),revenue:t===a?(null==(o=s.transactions)?void 0:o.revenue)||0:Math.max(0,((null==(c=s.transactions)?void 0:c.revenue)||0)-500*Math.random())}});t(r)}}catch(e){console.error("Error fetching analytics:",e),t([{time:"0:00",users:0,listings:0,revenue:0},{time:"6:00",users:5,listings:2,revenue:150},{time:"12:00",users:15,listings:8,revenue:450},{time:"18:00",users:25,listings:12,revenue:720},{time:"23:00",users:10,listings:5,revenue:300}])}};(0,r.useEffect)(()=>{i();let e=setInterval(i,3e5);return()=>clearInterval(e)},[]);let n={users:{color:"#3b82f6",label:"Active Users"},listings:{color:"#a855f7",label:"New Listings"},revenue:{color:"#10b981",label:"Revenue ($)"}},o=n[s];return(0,a.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Real-time Analytics"}),(0,a.jsx)("div",{className:"flex gap-2",children:Object.entries(n).map(e=>{let[t,r]=e;return(0,a.jsx)("button",{onClick:()=>l(t),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all ".concat(s===t?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:r.label},t)})})]}),(0,a.jsx)(m.u,{width:"100%",height:300,children:(0,a.jsxs)(u.Q,{data:e,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"gradient-".concat(s),x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:o.color,stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:o.color,stopOpacity:0})]})}),(0,a.jsx)(x.d,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(h.W,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:12}}),(0,a.jsx)(g.h,{stroke:"#9ca3af",style:{fontSize:12}}),(0,a.jsx)(p.m,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px"},labelStyle:{color:"#9ca3af"}}),(0,a.jsx)(y.Gk,{type:"monotone",dataKey:s,stroke:o.color,strokeWidth:2,fill:"url(#gradient-".concat(s,")")})]})})]})}var j=s(4172),f=s(2529),w=s(2056),N=s(5707),k=s(523),A=s(3166),S=s(5704);function C(){let[e,t]=(0,r.useState)({cpu:0,memory:0,disk:0,network:0,uptime:"0h"}),s=async()=>{let e=Date.now();try{let i=await fetch("".concat(S.env.NEXT_PUBLIC_API_URL,"/api/admin/stats"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("adminToken")),"Content-Type":"application/json"}}),n=Date.now()-e;if(i.ok){var s,a,r,l;let e=await i.json();t({cpu:(null==(a=e.serverHealth)||null==(s=a.cpu)?void 0:s.user)||25,memory:(null==(r=e.serverHealth)?void 0:r.memory)?e.serverHealth.memory.used/e.serverHealth.memory.total*100:45,disk:35,network:n<100?85:n<500?60:30,uptime:(null==(l=e.serverHealth)?void 0:l.uptime)?"".concat(Math.floor(e.serverHealth.uptime/3600),"h ").concat(Math.floor(e.serverHealth.uptime%3600/60),"m"):"24h 12m"})}else t({cpu:85,memory:70,disk:35,network:n,uptime:"Unknown"})}catch(e){t({cpu:0,memory:0,disk:0,network:0,uptime:"Down"})}};return(0,r.useEffect)(()=>{s();let e=setInterval(s,3e4);return()=>clearInterval(e)},[]),(0,a.jsxs)(d.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"w-5 h-5"}),"Server Health"]}),e.cpu<80&&e.memory<80?(0,a.jsx)(f.A,{className:"w-5 h-5 text-green-400"}):(0,a.jsx)(w.A,{className:"w-5 h-5 text-yellow-400"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(I,{icon:N.A,label:"CPU Usage",value:e.cpu,unit:"%"}),(0,a.jsx)(I,{icon:k.A,label:"Memory",value:e.memory,unit:"%"}),(0,a.jsx)(I,{icon:k.A,label:"Disk Usage",value:e.disk,unit:"%"}),(0,a.jsx)(I,{icon:A.A,label:"Network",value:e.network,unit:" Mbps"})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Uptime"}),(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:e.uptime})]})})]})}function I(e){let{icon:t,label:s,value:r,unit:l}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:s})]}),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(r<50?"text-green-400":r<80?"text-yellow-400":"text-red-400"),children:[r.toFixed(1),l]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-800 rounded-full h-2 overflow-hidden",children:(0,a.jsx)(d.P.div,{initial:{width:0},animate:{width:"".concat(r,"%")},transition:{duration:.5},className:"h-full ".concat(r<50?"bg-green-500":r<80?"bg-yellow-500":"bg-red-500")})})]})}var T=s(9559),P=s(5710),L=s(1360),U=s(7910),_=s(2952),R=s(8720);function D(){let e=[{icon:T.A,label:"Restart Server",color:"blue",action:()=>{R.o.loading("Restarting server..."),setTimeout(()=>{R.o.success("Server restarted successfully")},2e3)}},{icon:P.A,label:"Backup Database",color:"green",action:()=>{R.o.loading("Creating backup..."),setTimeout(()=>{R.o.success("Database backup completed")},3e3)}},{icon:L.A,label:"Clear Cache",color:"yellow",action:()=>{R.o.loading("Clearing cache..."),setTimeout(()=>{R.o.success("Cache cleared successfully")},1500)}},{icon:U.A,label:"Security Scan",color:"purple",action:()=>{R.o.loading("Running security scan..."),setTimeout(()=>{R.o.success("No vulnerabilities detected")},4e3)}}],t={blue:"hover:bg-blue-900/20 hover:border-blue-700",green:"hover:bg-green-900/20 hover:border-green-700",yellow:"hover:bg-yellow-900/20 hover:border-yellow-700",purple:"hover:bg-purple-900/20 hover:border-purple-700"};return(0,a.jsxs)(d.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:e.map((e,s)=>(0,a.jsxs)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e.action,className:"p-3 bg-gray-800/50 border border-gray-700 rounded-lg transition-all ".concat(t[e.color]),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5 text-gray-300 mx-auto mb-2"}),(0,a.jsx)("span",{className:"text-xs text-gray-400 block",children:e.label})]},s))}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-800",children:(0,a.jsxs)("button",{onClick:()=>{R.o.error("Emergency shutdown initiated")},className:"w-full p-3 bg-red-900/20 border border-red-800 rounded-lg hover:bg-red-900/30 transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(_.A,{className:"w-4 h-4 text-red-400"}),(0,a.jsx)("span",{className:"text-sm text-red-400 font-medium",children:"Emergency Shutdown"})]})})]})}var E=s(508),M=s(7586),B=s(8519),H=s(8874),z=s(1408),F=s(5704);function O(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),i=async()=>{try{let e;try{e=await fetch("".concat(F.env.NEXT_PUBLIC_API_URL,"/api/admin/activities"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("adminToken")),"Content-Type":"application/json"}})}catch(t){e=await fetch("".concat(F.env.NEXT_PUBLIC_API_URL,"/api/admin/stats"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("adminToken")),"Content-Type":"application/json"}})}if(e.ok){let s=await e.json();if(s.success&&s.activities){let e=s.activities.map(e=>({id:e.id,type:e.type,message:e.message,user:e.user,timestamp:new Date(e.timestamp)}));t(e)}}else console.error("Failed to fetch activities:",e.status),t([{id:"demo-1",type:"user",message:"Unable to connect to server",user:"system",timestamp:new Date}])}catch(e){console.error("Error fetching activities:",e),t([{id:"deploy-1",type:"success",message:"Backend deployment in progress...",user:"Railway",timestamp:new Date},{id:"deploy-2",type:"user",message:"New real-time data endpoint deploying",user:"Claude Admin Assistant",timestamp:new Date(Date.now()-3e4)},{id:"deploy-3",type:"listing",message:"Connected to Railway PostgreSQL database",user:"Railway Infrastructure",timestamp:new Date(Date.now()-6e4)}])}finally{l(!1)}};return(0,r.useEffect)(()=>{i();let e=setInterval(()=>{i()},3e4);return()=>clearInterval(e)},[]),(0,a.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Recent Activity"}),(0,a.jsx)("button",{onClick:i,className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:s?"Refreshing...":"Refresh â†’"})]}),(0,a.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:s?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),(0,a.jsx)("span",{className:"ml-3 text-gray-400",children:"Loading real activity..."})]}):(0,a.jsx)(z.N,{mode:"popLayout",children:e.map(e=>{var t;let s=(t=e.type,({user:E.A,listing:n.A,message:M.A,transaction:B.A,error:H.A,success:f.A})[t]);return(0,a.jsxs)(d.P.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-start gap-3 p-3 bg-gray-800/30 rounded-lg hover:bg-gray-800/50 transition-all",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-800 rounded-lg ".concat({user:"text-blue-400",listing:"text-purple-400",message:"text-green-400",transaction:"text-yellow-400",error:"text-red-400",success:"text-green-400"}[e.type]),children:(0,a.jsx)(s,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-200",children:e.message}),e.user&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["by ",e.user]})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:(e=>{let t=Math.floor((new Date().getTime()-e.getTime())/6e4);if(t<1)return"Just now";if(t<60)return"".concat(t,"m ago");let s=Math.floor(t/60);return s<24?"".concat(s,"h ago"):"".concat(Math.floor(s/24),"d ago")})(e.timestamp)})]},e.id)})})})]})}var X=s(5704);function Q(){let[e,t]=(0,r.useState)(""),[s,m]=(0,r.useState)({status:"healthy",issues:[]}),[u,x]=(0,r.useState)({activeUsers:0,newListings:0,transactions:0,revenue:0,serverLoad:0,responseTime:0}),h=async()=>{try{let r=await fetch("".concat(X.env.NEXT_PUBLIC_API_URL,"/api/admin/stats"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("adminToken")),"Content-Type":"application/json"}});if(r.ok){var e,t,s,a;let l=await r.json();x({activeUsers:(null==(e=l.users)?void 0:e.active)||0,newListings:(null==(t=l.listings)?void 0:t.today)||0,transactions:(null==(s=l.transactions)?void 0:s.total)||0,revenue:(null==(a=l.transactions)?void 0:a.revenue)||0,serverLoad:100*Math.random(),responseTime:200*Math.random()+50})}else console.error("Failed to fetch stats:",r.status)}catch(e){console.error("Error fetching stats:",e)}};return(0,r.useEffect)(()=>{let e=()=>{t(new Date().toLocaleString())};e();let s=setInterval(e,1e3);return()=>clearInterval(s)},[]),(0,r.useEffect)(()=>{h();let e=setInterval(()=>{h()},3e4);return()=>clearInterval(e)},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950",children:[(0,a.jsx)("header",{className:"border-b border-gray-800 bg-gray-900/50 backdrop-blur-xl",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Shaiitech Founder Panel"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Real-time analytics and control center"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:e}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("healthy"===s.status?"bg-green-500":"bg-red-500"," animate-pulse")}),(0,a.jsxs)("span",{className:"text-sm text-gray-300",children:["System ",s.status]})]})]})]})})}),s.issues.length>0&&(0,a.jsx)(d.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mx-6 mt-6 p-4 bg-red-900/20 border border-red-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.A,{className:"w-5 h-5 text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-red-400",children:"Server Issues Detected"}),(0,a.jsx)("p",{className:"text-sm text-gray-300 mt-1",children:s.issues.join(", ")})]})]})}),(0,a.jsxs)("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(G,{title:"Active Users",value:u.activeUsers,icon:i.A,trend:"+12%",color:"blue"}),(0,a.jsx)(G,{title:"New Listings",value:u.newListings,icon:n.A,trend:"+8%",color:"purple"}),(0,a.jsx)(G,{title:"Transactions",value:u.transactions,icon:o.A,trend:"+23%",color:"green"}),(0,a.jsx)(G,{title:"Revenue",value:"$".concat(u.revenue.toFixed(2)),icon:c.A,trend:"+15%",color:"yellow"})]}),(0,a.jsx)(b,{}),(0,a.jsx)(O,{})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(C,{}),(0,a.jsx)(D,{})]})]})]})}function G(e){let{title:t,value:s,icon:r,trend:l,color:i}=e;return(0,a.jsxs)(d.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br ".concat({blue:"from-blue-500 to-blue-600",purple:"from-purple-500 to-purple-600",green:"from-green-500 to-green-600",yellow:"from-yellow-500 to-yellow-600"}[i]," rounded-lg"),children:(0,a.jsx)(r,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("span",{className:"text-xs text-green-400 font-medium",children:l})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:s}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:t})]})]})}}},e=>{e.O(0,[559,720,718,441,255,358],()=>e(e.s=443)),_N_E=e.O()}]);