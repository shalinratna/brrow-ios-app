(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{4224:(e,t,a)=>{Promise.resolve().then(a.bind(a,9147))},6237:(e,t,a)=>{"use strict";a.d(t,{default:()=>j});var s=a(5155),r=a(2115),l=a(2619),n=a.n(l),i=a(63),c=a(1733),d=a(9384),o=a(1169),x=a(6617),h=a(4947),m=a(8131),g=a(7586),u=a(534),p=a(7910),y=a(5870),f=a(9540),b=a(5229);let N=[{name:"Dashboard",href:"/",icon:d.A},{name:"Users",href:"/users",icon:o.A},{name:"Listings",href:"/listings",icon:x.A},{name:"Garage Sales",href:"/garage-sales",icon:h.A},{name:"Marketplace",href:"/marketplace",icon:m.A},{name:"Messages",href:"/messages",icon:g.A},{name:"Analytics",href:"/analytics",icon:u.A},{name:"Moderation",href:"/moderation",icon:p.A},{name:"Settings",href:"/settings",icon:y.A}];function j(e){let{children:t}=e,[a,l]=(0,r.useState)(!1),n=(0,i.usePathname)();return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-950",children:[(0,s.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(a?"block":"hidden"),children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-900/80",onClick:()=>l(!1)}),(0,s.jsx)("div",{className:"fixed inset-y-0 left-0 w-64 bg-gray-900 border-r border-gray-800",children:(0,s.jsx)(v,{pathname:n,onClose:()=>l(!1)})})]}),(0,s.jsx)("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0",children:(0,s.jsx)("div",{className:"bg-gray-900 border-r border-gray-800",children:(0,s.jsx)(v,{pathname:n})})}),(0,s.jsxs)("div",{className:"flex-1 lg:pl-64",children:[(0,s.jsx)("div",{className:"lg:hidden",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-800 bg-gray-900",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Brrow Admin"}),(0,s.jsx)("button",{onClick:()=>l(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg",children:(0,s.jsx)(f.A,{className:"w-6 h-6"})})]})}),(0,s.jsx)("main",{className:"flex-1 overflow-auto",children:t})]})]})}function v(e){let{pathname:t,onClose:a}=e;return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-800",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Shaiitech Panel"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Admin Control Center"})]}),a&&(0,s.jsx)("button",{onClick:a,className:"p-1 text-gray-400 hover:text-white lg:hidden",children:(0,s.jsx)(b.A,{className:"w-5 h-5"})})]}),(0,s.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:N.map(e=>{let r=t===e.href;return(0,s.jsxs)(n(),{href:e.href,onClick:a,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-all ".concat(r?"bg-gradient-to-r from-blue-500/20 to-purple-500/20 text-white border border-blue-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5"}),e.name,r&&(0,s.jsx)(c.P.div,{layoutId:"activeTab",className:"ml-auto w-2 h-2 rounded-full bg-blue-400"})]},e.name)})}),(0,s.jsxs)("div",{className:"p-4 border-t border-gray-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),(0,s.jsx)("span",{children:"All systems operational"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Railway Deployed â€¢ Real-time Data"})]})]})}},9147:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),r=a(2115),l=a(6237),n=a(5704);function i(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[o,x]=(0,r.useState)(""),[h,m]=(0,r.useState)("all"),[g,u]=(0,r.useState)([]),p=async()=>{i(!0),d(null);try{let e=localStorage.getItem("adminToken"),a=await fetch("".concat(n.env.NEXT_PUBLIC_API_URL,"/api/admin/garage-sales"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!a.ok){401===a.status?d("Authentication failed. Please log in again."):403===a.status?d("Access denied. Admin privileges required."):d("API error: ".concat(a.status)),i(!1);return}let s=await a.json();s.garageSales?t(s.garageSales):t([])}catch(e){console.error("Error fetching garage sales:",e),d("Failed to connect to backend server"),t([{id:"1",title:"Spring Cleaning Sale",description:"Clothes, books, and household items",location:"San Francisco, CA",date:"2024-03-15",status:"ACTIVE",host:{id:"user1",email:"sarah@example.com",firstName:"Sarah",lastName:"Johnson"},itemCount:25,createdAt:new Date().toISOString()},{id:"2",title:"Moving Sale - Everything Must Go!",description:"Furniture, electronics, kitchen appliances",location:"Oakland, CA",date:"2024-03-20",status:"PENDING",host:{id:"user2",email:"mike@example.com",firstName:"Mike",lastName:"Chen"},itemCount:42,createdAt:new Date().toISOString()}])}finally{i(!1)}};(0,r.useEffect)(()=>{p()},[]);let y=async e=>{if(0!==g.length&&confirm("Are you sure you want to ".concat(e," ").concat(g.length," garage sales?")))try{let t=localStorage.getItem("adminToken");for(let a of g){let s="/api/admin/garage-sales/".concat(a),r="delete"===e?"DELETE":"PATCH",l="delete"!==e?{status:"approve"===e?"ACTIVE":"CANCELLED"}:void 0;await fetch("".concat(n.env.NEXT_PUBLIC_API_URL).concat(s),{method:r,headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:l?JSON.stringify(l):void 0})}u([]),p()}catch(t){console.error("Error performing ".concat(e,":"),t)}},f=async(e,t)=>{if(confirm("Are you sure you want to ".concat(e," this garage sale?")))try{let a=localStorage.getItem("adminToken"),s="delete"!==e?{status:"approve"===e?"ACTIVE":"CANCELLED"}:void 0;await fetch("".concat(n.env.NEXT_PUBLIC_API_URL).concat("/api/admin/garage-sales/".concat(t)),{method:"delete"===e?"DELETE":"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:s?JSON.stringify(s):void 0}),p()}catch(t){console.error("Error performing ".concat(e,":"),t)}},b=e.filter(e=>{var t;let a=e.title.toLowerCase().includes(o.toLowerCase())||e.location.toLowerCase().includes(o.toLowerCase())||(null==(t=e.host)?void 0:t.email.toLowerCase().includes(o.toLowerCase())),s="all"===h||e.status===h;return a&&s});return(0,s.jsx)(l.default,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Garage Sales Management"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",e.length," garage sales"]})]}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by title, location, or host email...",value:o,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Filter"}),(0,s.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"All Statuses"}),(0,s.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,s.jsx)("option",{value:"PENDING",children:"Pending"}),(0,s.jsx)("option",{value:"CANCELLED",children:"Cancelled"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bulk Actions"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>y("approve"),disabled:0===g.length,className:"px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:["Approve (",g.length,")"]}),(0,s.jsxs)("button",{onClick:()=>y("cancel"),disabled:0===g.length,className:"px-3 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:["Cancel (",g.length,")"]}),(0,s.jsxs)("button",{onClick:()=>y("delete"),disabled:0===g.length,className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:["Delete (",g.length,")"]})]})]})]})}),c&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,s.jsx)("p",{className:"text-red-700",children:c})}),a?(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-2",children:"Loading garage sales..."})]})}):(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,s.jsx)("input",{type:"checkbox",checked:g.length===b.length&&b.length>0,onChange:e=>{e.target.checked?u(b.map(e=>e.id)):u([])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Garage Sale"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Host"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(e=>{var t,a,r,l;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("input",{type:"checkbox",checked:g.includes(e.id),onChange:t=>{t.target.checked?u([...g,e.id]):u(g.filter(t=>t!==e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:(null==(t=e.host)?void 0:t.firstName)&&(null==(a=e.host)?void 0:a.lastName)?"".concat(e.host.firstName," ").concat(e.host.lastName):(null==(r=e.host)?void 0:r.email)||"Unknown"}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:null==(l=e.host)?void 0:l.email})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.location}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.itemCount," items"]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((e=>{switch(e){case"ACTIVE":return"bg-green-100 text-green-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:["PENDING"===e.status&&(0,s.jsx)("button",{onClick:()=>f("approve",e.id),className:"text-green-600 hover:text-green-900",children:"Approve"}),"ACTIVE"===e.status&&(0,s.jsx)("button",{onClick:()=>f("cancel",e.id),className:"text-yellow-600 hover:text-yellow-900",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>f("delete",e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id)})})]}),0===b.length&&!a&&(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No garage sales found."})})]})]})})}}},e=>{e.O(0,[559,885,441,255,358],()=>e(e.s=4224)),_N_E=e.O()}]);