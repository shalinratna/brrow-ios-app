(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{508:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2056:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2529:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4384:(e,t,r)=>{Promise.resolve().then(r.bind(r,7449))},4589:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]])},6485:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6617:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},6651:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6983:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},7449:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(5155),a=r(2115),i=r(1733),n=r(508),l=r(6617),o=r(7586),c=r(4589),d=r(2056),x=r(6651),p=r(6983),u=r(2529),m=r(8874),h=r(7828);let g=(0,r(1847).A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var y=r(6485),j=r(5704);function v(){let[e,t]=(0,a.useState)([]),[r,v]=(0,a.useState)(!0),[b,N]=(0,a.useState)([]),[w,f]=(0,a.useState)(""),[A,S]=(0,a.useState)("all"),[E,k]=(0,a.useState)("all"),[D,I]=(0,a.useState)("all"),C=async()=>{try{let r=await fetch("".concat(j.env.NEXT_PUBLIC_API_URL,"/api/admin/moderation"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("adminToken")),"Content-Type":"application/json"}});if(r.ok){var e;let s=await r.json();t((null==(e=s.data)?void 0:e.items)||s.items||[])}else t([{id:"1",type:"USER",status:"PENDING",priority:"HIGH",createdAt:new Date().toISOString(),violationType:"Spam/Scam",user:{id:"user1",email:"suspicious@example.com",username:"suspicious_user",firstName:"Suspicious",lastName:"User",isActive:!0,warningCount:3},report:{id:"report1",reason:"Suspected fraudulent activity",description:"User is posting fake listings and asking for payments outside the platform",reportedBy:"user2",reportedAt:new Date(Date.now()-36e5).toISOString()}},{id:"2",type:"LISTING",status:"PENDING",priority:"MEDIUM",createdAt:new Date(Date.now()-72e5).toISOString(),violationType:"Inappropriate Content",listing:{id:"listing1",title:"Questionable Item for Sale",price:999,status:"FLAGGED"},report:{id:"report2",reason:"Inappropriate content",description:"Listing contains inappropriate images and descriptions",reportedBy:"user3",reportedAt:new Date(Date.now()-36e5).toISOString()}},{id:"3",type:"MESSAGE",status:"ESCALATED",priority:"CRITICAL",createdAt:new Date(Date.now()-144e5).toISOString(),violationType:"Harassment",message:{id:"msg1",content:"This message contains harassment and threatening language...",senderId:"user4",receiverId:"user5"},report:{id:"report3",reason:"Harassment and threats",description:"User is sending threatening messages and harassment",reportedBy:"user5",reportedAt:new Date(Date.now()-108e5).toISOString()}},{id:"4",type:"REPORT",status:"APPROVED",priority:"LOW",createdAt:new Date(Date.now()-864e5).toISOString(),reviewedAt:new Date(Date.now()-36e5).toISOString(),reviewedBy:"admin1",violationType:"Misleading Information",report:{id:"report4",reason:"False product description",description:"Item description does not match the actual product",reportedBy:"user6",reportedAt:new Date(Date.now()-864e5).toISOString()}},{id:"5",type:"USER",status:"REJECTED",priority:"LOW",createdAt:new Date(Date.now()-1728e5).toISOString(),reviewedAt:new Date(Date.now()-864e5).toISOString(),reviewedBy:"admin2",violationType:"False Report",user:{id:"user7",email:"innocent@example.com",username:"innocent_user",firstName:"Innocent",lastName:"User",isActive:!0,warningCount:0},report:{id:"report5",reason:"False accusation",description:"Report was found to be false after investigation",reportedBy:"user8",reportedAt:new Date(Date.now()-1728e5).toISOString()}}])}catch(e){console.error("Error fetching moderation items:",e),t([{id:"1",type:"USER",status:"PENDING",priority:"HIGH",createdAt:new Date().toISOString(),violationType:"Spam",user:{id:"user1",email:"test@example.com",username:"testuser",firstName:"Test",lastName:"User",isActive:!0,warningCount:1}}])}finally{v(!1)}};(0,a.useEffect)(()=>{C()},[]);let T=async e=>{if(0!==b.length&&confirm("Are you sure you want to ".concat(e," ").concat(b.length," items?")))try{for(let t of b)await fetch("".concat(j.env.NEXT_PUBLIC_API_URL,"/api/admin/moderation/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("adminToken")),"Content-Type":"application/json"},body:JSON.stringify({action:e,reviewedBy:"current_admin",reviewedAt:new Date().toISOString()})});N([]),C()}catch(t){console.error("Error performing ".concat(e,":"),t)}},R=e.filter(e=>{var t,r,s,a;let i=(null==(t=e.user)?void 0:t.email.toLowerCase().includes(w.toLowerCase()))||(null==(r=e.listing)?void 0:r.title.toLowerCase().includes(w.toLowerCase()))||(null==(s=e.violationType)?void 0:s.toLowerCase().includes(w.toLowerCase()))||(null==(a=e.report)?void 0:a.reason.toLowerCase().includes(w.toLowerCase())),n="all"===A||e.status===A,l="all"===E||e.type===E,o="all"===D||e.priority===D;return i&&n&&l&&o});return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 p-6",children:(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Moderation Center"}),(0,s.jsx)("p",{className:"text-gray-400 mt-2",children:"Review and moderate platform content and user reports"})]})}),(0,s.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Search moderation items...",value:w,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsxs)("select",{value:A,onChange:e=>S(e.target.value),className:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"PENDING",children:"Pending"}),(0,s.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,s.jsx)("option",{value:"REJECTED",children:"Rejected"}),(0,s.jsx)("option",{value:"ESCALATED",children:"Escalated"})]}),(0,s.jsxs)("select",{value:E,onChange:e=>k(e.target.value),className:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"All Types"}),(0,s.jsx)("option",{value:"USER",children:"Users"}),(0,s.jsx)("option",{value:"LISTING",children:"Listings"}),(0,s.jsx)("option",{value:"MESSAGE",children:"Messages"}),(0,s.jsx)("option",{value:"REPORT",children:"Reports"})]}),(0,s.jsxs)("select",{value:D,onChange:e=>I(e.target.value),className:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"All Priority"}),(0,s.jsx)("option",{value:"CRITICAL",children:"Critical"}),(0,s.jsx)("option",{value:"HIGH",children:"High"}),(0,s.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,s.jsx)("option",{value:"LOW",children:"Low"})]})]}),b.length>0&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>T("approve"),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:["Approve (",b.length,")"]}),(0,s.jsxs)("button",{onClick:()=>T("reject"),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:["Reject (",b.length,")"]}),(0,s.jsxs)("button",{onClick:()=>T("escalate"),className:"px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm",children:["Escalate (",b.length,")"]}),(0,s.jsxs)("button",{onClick:()=>T("ban"),className:"px-3 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm",children:["Ban (",b.length,")"]})]})]})}),(0,s.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl overflow-hidden",children:r?(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),(0,s.jsx)("span",{className:"ml-3 text-gray-400",children:"Loading moderation items..."})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-800/50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-4 text-left",children:(0,s.jsx)("input",{type:"checkbox",checked:b.length===R.length&&R.length>0,onChange:e=>{e.target.checked?N(R.map(e=>e.id)):N([])},className:"rounded border-gray-600 bg-gray-700 text-blue-600"})}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-400",children:"Item"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-400",children:"Type"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-400",children:"Priority"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-400",children:"Status"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-400",children:"Report"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-400",children:"Created"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-400",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:R.map(e=>{var t;let r=(e=>{switch(e){case"USER":return n.A;case"LISTING":return l.A;case"MESSAGE":return o.A;case"REPORT":return c.A;default:return d.A}})(e.type);return(0,s.jsxs)("tr",{className:"border-t border-gray-800 hover:bg-gray-800/30",children:[(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("input",{type:"checkbox",checked:b.includes(e.id),onChange:t=>{t.target.checked?N([...b,e.id]):N(b.filter(t=>t!==e.id))},className:"rounded border-gray-600 bg-gray-700 text-blue-600"})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(r,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-white",children:e.violationType||"Moderation Required"}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:[e.user&&"User: ".concat(e.user.email),e.listing&&"Listing: ".concat(e.listing.title),e.message&&"Message Content",e.report&&!e.user&&!e.listing&&!e.message&&"General Report"]}),(null==(t=e.user)?void 0:t.warningCount)&&e.user.warningCount>0&&(0,s.jsxs)("div",{className:"text-xs text-orange-400 mt-1",children:[e.user.warningCount," previous warnings"]})]})]})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.type})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"CRITICAL":return"bg-red-100 text-red-800";case"HIGH":return"bg-orange-100 text-orange-800";case"MEDIUM":return"bg-yellow-100 text-yellow-800";case"LOW":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority)),children:e.priority})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"ESCALATED":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:["PENDING"===e.status&&(0,s.jsx)(p.A,{className:"w-3 h-3 mr-1"}),"APPROVED"===e.status&&(0,s.jsx)(u.A,{className:"w-3 h-3 mr-1"}),"REJECTED"===e.status&&(0,s.jsx)(m.A,{className:"w-3 h-3 mr-1"}),"ESCALATED"===e.status&&(0,s.jsx)(d.A,{className:"w-3 h-3 mr-1"}),e.status]})}),(0,s.jsx)("td",{className:"p-4 max-w-xs",children:e.report&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-white font-medium mb-1",children:e.report.reason}),e.report.description&&(0,s.jsx)("div",{className:"text-xs text-gray-400",children:e.report.description.length>80?"".concat(e.report.description.substring(0,80),"..."):e.report.description})]})}),(0,s.jsxs)("td",{className:"p-4 text-sm text-gray-400",children:[new Date(e.createdAt).toLocaleDateString(),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleTimeString()}),e.reviewedAt&&(0,s.jsxs)("div",{className:"text-xs text-blue-400 mt-1",children:["Reviewed by ",e.reviewedBy]})]}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"p-1 text-blue-400 hover:text-blue-300",title:"View Details",children:(0,s.jsx)(h.A,{className:"w-4 h-4"})}),"PENDING"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"p-1 text-green-400 hover:text-green-300",title:"Approve",children:(0,s.jsx)(u.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{className:"p-1 text-red-400 hover:text-red-300",title:"Reject",children:(0,s.jsx)(m.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{className:"p-1 text-purple-400 hover:text-purple-300",title:"Escalate",children:(0,s.jsx)(d.A,{className:"w-4 h-4"})})]}),(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-300",title:"Ban User",children:(0,s.jsx)(g,{className:"w-4 h-4"})})]})})]},e.id)})})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[(0,s.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Pending Review"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"PENDING"===e.status).length})]}),(0,s.jsx)(p.A,{className:"w-8 h-8 text-yellow-400"})]})}),(0,s.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Critical Priority"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"CRITICAL"===e.priority).length})]}),(0,s.jsx)(d.A,{className:"w-8 h-8 text-red-400"})]})}),(0,s.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Escalated"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"ESCALATED"===e.status).length})]}),(0,s.jsx)(c.A,{className:"w-8 h-8 text-purple-400"})]})}),(0,s.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Resolved Today"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>{let t=new Date,r=e.reviewedAt?new Date(e.reviewedAt):null;return r&&r.toDateString()===t.toDateString()}).length})]}),(0,s.jsx)(y.A,{className:"w-8 h-8 text-green-400"})]})})]})]})})}},7586:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},7828:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8874:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},e=>{e.O(0,[559,441,255,358],()=>e(e.s=4384)),_N_E=e.O()}]);