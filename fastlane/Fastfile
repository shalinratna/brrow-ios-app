default_platform(:ios)

platform :ios do
  desc "Increment build number and create archive"
  lane :release do
    # Increment build number
    increment_build_number(
      build_number: latest_testflight_build_number + 1
    )
    
    # Build and upload to App Store Connect
    build_app(scheme: "Brrow")
    upload_to_app_store(
      skip_metadata: true,
      skip_screenshots: true
    )
  end
  
  desc "Just increment build number"
  lane :bump do
    increment_build_number
    build_number = get_build_number
    UI.success "Build number incremented to: #{build_number}"
  end
end